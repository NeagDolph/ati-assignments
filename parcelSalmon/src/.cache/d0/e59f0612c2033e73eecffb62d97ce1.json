{"id":"zSTK","dependencies":[{"name":"/root/salmon/parcelSalmon/package.json","includedInParent":true,"mtime":1580244959820},{"name":"axios","loc":{"line":1,"column":18},"parent":"/root/salmon/parcelSalmon/src/js/auth.js","resolved":"/root/salmon/parcelSalmon/node_modules/axios/index.js"},{"name":"./globals","loc":{"line":2,"column":45},"parent":"/root/salmon/parcelSalmon/src/js/auth.js","resolved":"/root/salmon/parcelSalmon/src/js/globals.js"},{"name":"./parse","loc":{"line":3,"column":26},"parent":"/root/salmon/parcelSalmon/src/js/auth.js","resolved":"/root/salmon/parcelSalmon/src/js/parse.js"}],"generated":{"js":"\"use strict\";var t=o(require(\"axios\")),e=require(\"./globals\"),n=require(\"./parse\");function o(t){return t&&t.__esModule?t:{default:t}}gapi.load(\"auth2\",function(){gapi.auth2.init({client_id:\"203450520052-4olsv1k1uj6ditok97qncbho9n8usk36.apps.googleusercontent.com\",cookiepolicy:\"single_host_origin\",scopes:[\"https://www.googleapis.com/auth/userinfo.email\",\"https://www.googleapis.com/auth/userinfo.profile\"]}).then(function(t){e.sharedData.signFuncs.signIn=function(){return t.signIn().then(function(){return a(t.currentUser.get())})},t.isSignedIn.get()?a(t.currentUser.get()):e.sharedData.logged=!1})});var a=function(o){e.userauth.authResponse=o.getAuthResponse(),e.userauth.profile=o.getBasicProfile(),t.default.post(e.apiurl.login,{idtoken:e.userauth.authResponse.id_token}).then(function(o){var a=o.data;a?(console.log(\"AUTH\",a),(0,n.parseData)(a),e.sharedData.logged=!0):t.default.post(e.apiurl.data)}).catch(function(t){console.log(\"login failed\",t)})};e.sharedData.signFuncs.signOut=function(){e.userauth.authInstance=gapi.auth2.getAuthInstance(),e.userauth.authInstance.signOut().then(function(){window.location.href=\"/logout\"})};"},"sourceMaps":{"js":{"mappings":[{"source":"js/auth.js","original":{"line":44,"column":0},"generated":{"line":1,"column":0}},{"source":"js/auth.js","original":{"line":1,"column":0},"generated":{"line":1,"column":13}},{"source":"js/auth.js","original":{"line":1,"column":0},"generated":{"line":1,"column":17}},{"source":"js/auth.js","original":{"line":1,"column":0},"generated":{"line":1,"column":19}},{"source":"js/auth.js","original":{"line":1,"column":0},"generated":{"line":1,"column":21}},{"source":"js/auth.js","original":{"line":1,"column":0},"generated":{"line":1,"column":29}},{"source":"js/auth.js","original":{"line":2,"column":0},"generated":{"line":1,"column":39}},{"source":"js/auth.js","original":{"line":2,"column":0},"generated":{"line":1,"column":41}},{"source":"js/auth.js","original":{"line":2,"column":0},"generated":{"line":1,"column":49}},{"source":"js/auth.js","original":{"line":3,"column":0},"generated":{"line":1,"column":62}},{"source":"js/auth.js","original":{"line":3,"column":0},"generated":{"line":1,"column":64}},{"source":"js/auth.js","original":{"line":3,"column":0},"generated":{"line":1,"column":72}},{"source":"js/auth.js","original":{"line":44,"column":0},"generated":{"line":1,"column":83}},{"source":"js/auth.js","original":{"line":44,"column":0},"generated":{"line":1,"column":92}},{"source":"js/auth.js","original":{"line":44,"column":0},"generated":{"line":1,"column":94}},{"source":"js/auth.js","original":{"line":44,"column":0},"generated":{"line":1,"column":97}},{"source":"js/auth.js","original":{"line":44,"column":0},"generated":{"line":1,"column":104}},{"source":"js/auth.js","original":{"line":44,"column":0},"generated":{"line":1,"column":107}},{"source":"js/auth.js","original":{"line":44,"column":0},"generated":{"line":1,"column":109}},{"source":"js/auth.js","original":{"line":44,"column":0},"generated":{"line":1,"column":120}},{"source":"js/auth.js","original":{"line":44,"column":0},"generated":{"line":1,"column":122}},{"source":"js/auth.js","original":{"line":44,"column":0},"generated":{"line":1,"column":123}},{"source":"js/auth.js","original":{"line":44,"column":0},"generated":{"line":1,"column":131}},{"source":"js/auth.js","name":"gapi","original":{"line":5,"column":0},"generated":{"line":1,"column":134}},{"source":"js/auth.js","name":"load","original":{"line":5,"column":5},"generated":{"line":1,"column":139}},{"source":"js/auth.js","original":{"line":5,"column":10},"generated":{"line":1,"column":144}},{"source":"js/auth.js","original":{"line":5,"column":19},"generated":{"line":1,"column":152}},{"source":"js/auth.js","name":"gapi","original":{"line":6,"column":2},"generated":{"line":1,"column":163}},{"source":"js/auth.js","name":"auth2","original":{"line":6,"column":7},"generated":{"line":1,"column":168}},{"source":"js/auth.js","name":"init","original":{"line":7,"column":5},"generated":{"line":1,"column":174}},{"source":"js/auth.js","original":{"line":7,"column":10},"generated":{"line":1,"column":179}},{"source":"js/auth.js","name":"client_id","original":{"line":8,"column":6},"generated":{"line":1,"column":180}},{"source":"js/auth.js","original":{"line":9,"column":8},"generated":{"line":1,"column":190}},{"source":"js/auth.js","name":"cookiepolicy","original":{"line":10,"column":6},"generated":{"line":1,"column":265}},{"source":"js/auth.js","original":{"line":10,"column":20},"generated":{"line":1,"column":278}},{"source":"js/auth.js","name":"scopes","original":{"line":11,"column":6},"generated":{"line":1,"column":299}},{"source":"js/auth.js","original":{"line":11,"column":14},"generated":{"line":1,"column":306}},{"source":"js/auth.js","original":{"line":12,"column":8},"generated":{"line":1,"column":307}},{"source":"js/auth.js","original":{"line":13,"column":8},"generated":{"line":1,"column":356}},{"source":"js/auth.js","name":"then","original":{"line":16,"column":5},"generated":{"line":1,"column":410}},{"source":"js/auth.js","original":{"line":16,"column":10},"generated":{"line":1,"column":415}},{"source":"js/auth.js","name":"auth2","original":{"line":16,"column":10},"generated":{"line":1,"column":424}},{"source":"js/auth.js","name":"signFuncs","original":{"line":17,"column":17},"generated":{"line":1,"column":427}},{"source":"js/auth.js","name":"signFuncs","original":{"line":17,"column":17},"generated":{"line":1,"column":429}},{"source":"js/auth.js","name":"signFuncs","original":{"line":17,"column":17},"generated":{"line":1,"column":440}},{"source":"js/auth.js","name":"signIn","original":{"line":17,"column":27},"generated":{"line":1,"column":450}},{"source":"js/auth.js","original":{"line":17,"column":36},"generated":{"line":1,"column":457}},{"source":"js/auth.js","name":"auth2","original":{"line":18,"column":8},"generated":{"line":1,"column":468}},{"source":"js/auth.js","name":"auth2","original":{"line":18,"column":8},"generated":{"line":1,"column":475}},{"source":"js/auth.js","name":"signIn","original":{"line":18,"column":14},"generated":{"line":1,"column":477}},{"source":"js/auth.js","name":"then","original":{"line":18,"column":23},"generated":{"line":1,"column":486}},{"source":"js/auth.js","original":{"line":18,"column":28},"generated":{"line":1,"column":491}},{"source":"js/auth.js","name":"signedIn","original":{"line":18,"column":34},"generated":{"line":1,"column":502}},{"source":"js/auth.js","name":"signedIn","original":{"line":18,"column":34},"generated":{"line":1,"column":509}},{"source":"js/auth.js","name":"auth2","original":{"line":18,"column":43},"generated":{"line":1,"column":511}},{"source":"js/auth.js","name":"currentUser","original":{"line":18,"column":49},"generated":{"line":1,"column":513}},{"source":"js/auth.js","name":"get","original":{"line":18,"column":61},"generated":{"line":1,"column":525}},{"source":"js/auth.js","name":"auth2","original":{"line":19,"column":10},"generated":{"line":1,"column":535}},{"source":"js/auth.js","name":"isSignedIn","original":{"line":19,"column":16},"generated":{"line":1,"column":537}},{"source":"js/auth.js","name":"get","original":{"line":19,"column":27},"generated":{"line":1,"column":548}},{"source":"js/auth.js","name":"signedIn","original":{"line":19,"column":34},"generated":{"line":1,"column":554}},{"source":"js/auth.js","name":"auth2","original":{"line":19,"column":43},"generated":{"line":1,"column":556}},{"source":"js/auth.js","name":"currentUser","original":{"line":19,"column":49},"generated":{"line":1,"column":558}},{"source":"js/auth.js","name":"get","original":{"line":19,"column":61},"generated":{"line":1,"column":570}},{"source":"js/auth.js","name":"sharedData","original":{"line":20,"column":11},"generated":{"line":1,"column":577}},{"source":"js/auth.js","name":"logged","original":{"line":20,"column":22},"generated":{"line":1,"column":579}},{"source":"js/auth.js","name":"logged","original":{"line":20,"column":22},"generated":{"line":1,"column":590}},{"source":"js/auth.js","original":{"line":20,"column":31},"generated":{"line":1,"column":598}},{"source":"js/auth.js","original":{"line":24,"column":0},"generated":{"line":1,"column":604}},{"source":"js/auth.js","name":"signedIn","original":{"line":24,"column":4},"generated":{"line":1,"column":608}},{"source":"js/auth.js","original":{"line":24,"column":15},"generated":{"line":1,"column":610}},{"source":"js/auth.js","name":"googleUser","original":{"line":24,"column":15},"generated":{"line":1,"column":619}},{"source":"js/auth.js","name":"authResponse","original":{"line":25,"column":11},"generated":{"line":1,"column":622}},{"source":"js/auth.js","name":"authResponse","original":{"line":25,"column":11},"generated":{"line":1,"column":624}},{"source":"js/auth.js","name":"authResponse","original":{"line":25,"column":11},"generated":{"line":1,"column":633}},{"source":"js/auth.js","name":"googleUser","original":{"line":25,"column":26},"generated":{"line":1,"column":646}},{"source":"js/auth.js","name":"getAuthResponse","original":{"line":25,"column":37},"generated":{"line":1,"column":648}},{"source":"js/auth.js","name":"profile","original":{"line":26,"column":11},"generated":{"line":1,"column":666}},{"source":"js/auth.js","name":"profile","original":{"line":26,"column":11},"generated":{"line":1,"column":668}},{"source":"js/auth.js","name":"profile","original":{"line":26,"column":11},"generated":{"line":1,"column":677}},{"source":"js/auth.js","name":"googleUser","original":{"line":26,"column":21},"generated":{"line":1,"column":685}},{"source":"js/auth.js","name":"getBasicProfile","original":{"line":26,"column":32},"generated":{"line":1,"column":687}},{"source":"js/auth.js","name":"post","original":{"line":29,"column":5},"generated":{"line":1,"column":705}},{"source":"js/auth.js","name":"post","original":{"line":29,"column":5},"generated":{"line":1,"column":707}},{"source":"js/auth.js","name":"post","original":{"line":29,"column":5},"generated":{"line":1,"column":715}},{"source":"js/auth.js","name":"apiurl","original":{"line":29,"column":10},"generated":{"line":1,"column":720}},{"source":"js/auth.js","name":"login","original":{"line":29,"column":17},"generated":{"line":1,"column":722}},{"source":"js/auth.js","name":"login","original":{"line":29,"column":17},"generated":{"line":1,"column":729}},{"source":"js/auth.js","original":{"line":29,"column":24},"generated":{"line":1,"column":735}},{"source":"js/auth.js","name":"idtoken","original":{"line":29,"column":26},"generated":{"line":1,"column":736}},{"source":"js/auth.js","name":"userauth","original":{"line":29,"column":35},"generated":{"line":1,"column":744}},{"source":"js/auth.js","name":"authResponse","original":{"line":29,"column":44},"generated":{"line":1,"column":746}},{"source":"js/auth.js","name":"authResponse","original":{"line":29,"column":44},"generated":{"line":1,"column":755}},{"source":"js/auth.js","name":"id_token","original":{"line":29,"column":57},"generated":{"line":1,"column":768}},{"source":"js/auth.js","name":"then","original":{"line":30,"column":5},"generated":{"line":1,"column":779}},{"source":"js/auth.js","original":{"line":30,"column":10},"generated":{"line":1,"column":784}},{"source":"js/auth.js","original":{"line":30,"column":22},"generated":{"line":1,"column":793}},{"source":"js/auth.js","name":"data","original":{"line":30,"column":12},"generated":{"line":1,"column":796}},{"source":"js/auth.js","name":"data","original":{"line":30,"column":12},"generated":{"line":1,"column":800}},{"source":"js/auth.js","name":"data","original":{"line":30,"column":12},"generated":{"line":1,"column":802}},{"source":"js/auth.js","name":"data","original":{"line":30,"column":12},"generated":{"line":1,"column":804}},{"source":"js/auth.js","name":"data","original":{"line":31,"column":10},"generated":{"line":1,"column":809}},{"source":"js/auth.js","name":"console","original":{"line":32,"column":8},"generated":{"line":1,"column":812}},{"source":"js/auth.js","name":"log","original":{"line":32,"column":16},"generated":{"line":1,"column":820}},{"source":"js/auth.js","original":{"line":32,"column":20},"generated":{"line":1,"column":824}},{"source":"js/auth.js","name":"data","original":{"line":32,"column":28},"generated":{"line":1,"column":831}},{"source":"js/auth.js","name":"data","original":{"line":33,"column":18},"generated":{"line":1,"column":835}},{"source":"js/auth.js","name":"data","original":{"line":33,"column":18},"generated":{"line":1,"column":837}},{"source":"js/auth.js","name":"data","original":{"line":33,"column":18},"generated":{"line":1,"column":839}},{"source":"js/auth.js","name":"data","original":{"line":33,"column":18},"generated":{"line":1,"column":850}},{"source":"js/auth.js","name":"logged","original":{"line":34,"column":19},"generated":{"line":1,"column":853}},{"source":"js/auth.js","name":"logged","original":{"line":34,"column":19},"generated":{"line":1,"column":855}},{"source":"js/auth.js","name":"logged","original":{"line":34,"column":19},"generated":{"line":1,"column":866}},{"source":"js/auth.js","original":{"line":34,"column":28},"generated":{"line":1,"column":874}},{"source":"js/auth.js","name":"post","original":{"line":36,"column":14},"generated":{"line":1,"column":877}},{"source":"js/auth.js","name":"post","original":{"line":36,"column":14},"generated":{"line":1,"column":879}},{"source":"js/auth.js","name":"post","original":{"line":36,"column":14},"generated":{"line":1,"column":887}},{"source":"js/auth.js","name":"apiurl","original":{"line":36,"column":19},"generated":{"line":1,"column":892}},{"source":"js/auth.js","name":"data","original":{"line":36,"column":26},"generated":{"line":1,"column":894}},{"source":"js/auth.js","name":"data","original":{"line":36,"column":26},"generated":{"line":1,"column":901}},{"source":"js/auth.js","name":"catch","original":{"line":39,"column":5},"generated":{"line":1,"column":909}},{"source":"js/auth.js","original":{"line":39,"column":11},"generated":{"line":1,"column":915}},{"source":"js/auth.js","name":"e","original":{"line":39,"column":11},"generated":{"line":1,"column":924}},{"source":"js/auth.js","name":"console","original":{"line":40,"column":6},"generated":{"line":1,"column":927}},{"source":"js/auth.js","name":"log","original":{"line":40,"column":14},"generated":{"line":1,"column":935}},{"source":"js/auth.js","original":{"line":40,"column":18},"generated":{"line":1,"column":939}},{"source":"js/auth.js","name":"e","original":{"line":40,"column":34},"generated":{"line":1,"column":954}},{"source":"js/auth.js","name":"sharedData","original":{"line":44,"column":0},"generated":{"line":1,"column":960}},{"source":"js/auth.js","name":"signFuncs","original":{"line":44,"column":11},"generated":{"line":1,"column":962}},{"source":"js/auth.js","name":"signFuncs","original":{"line":44,"column":11},"generated":{"line":1,"column":973}},{"source":"js/auth.js","name":"signOut","original":{"line":44,"column":21},"generated":{"line":1,"column":983}},{"source":"js/auth.js","original":{"line":44,"column":31},"generated":{"line":1,"column":991}},{"source":"js/auth.js","name":"authInstance","original":{"line":45,"column":11},"generated":{"line":1,"column":1002}},{"source":"js/auth.js","name":"authInstance","original":{"line":45,"column":11},"generated":{"line":1,"column":1004}},{"source":"js/auth.js","name":"authInstance","original":{"line":45,"column":11},"generated":{"line":1,"column":1013}},{"source":"js/auth.js","name":"gapi","original":{"line":45,"column":26},"generated":{"line":1,"column":1026}},{"source":"js/auth.js","name":"auth2","original":{"line":45,"column":31},"generated":{"line":1,"column":1031}},{"source":"js/auth.js","name":"getAuthInstance","original":{"line":45,"column":37},"generated":{"line":1,"column":1037}},{"source":"js/auth.js","name":"authInstance","original":{"line":46,"column":11},"generated":{"line":1,"column":1055}},{"source":"js/auth.js","name":"authInstance","original":{"line":46,"column":11},"generated":{"line":1,"column":1057}},{"source":"js/auth.js","name":"authInstance","original":{"line":46,"column":11},"generated":{"line":1,"column":1066}},{"source":"js/auth.js","name":"signOut","original":{"line":46,"column":24},"generated":{"line":1,"column":1079}},{"source":"js/auth.js","name":"then","original":{"line":46,"column":34},"generated":{"line":1,"column":1089}},{"source":"js/auth.js","original":{"line":46,"column":39},"generated":{"line":1,"column":1094}},{"source":"js/auth.js","name":"window","original":{"line":47,"column":4},"generated":{"line":1,"column":1105}},{"source":"js/auth.js","name":"location","original":{"line":47,"column":11},"generated":{"line":1,"column":1112}},{"source":"js/auth.js","name":"href","original":{"line":47,"column":20},"generated":{"line":1,"column":1121}},{"source":"js/auth.js","original":{"line":47,"column":27},"generated":{"line":1,"column":1126}}],"sources":{"js/auth.js":"import axios from 'axios';\nimport { sharedData, userauth, apiurl } from './globals';\nimport { parseData } from './parse';\n\ngapi.load(\"auth2\", function() {\n  gapi.auth2\n    .init({\n      client_id:\n        \"203450520052-4olsv1k1uj6ditok97qncbho9n8usk36.apps.googleusercontent.com\",\n      cookiepolicy: \"single_host_origin\",\n      scopes: [\n        \"https://www.googleapis.com/auth/userinfo.email\",\n        \"https://www.googleapis.com/auth/userinfo.profile\"\n      ]\n    })\n    .then(auth2 => {\n      sharedData.signFuncs.signIn = () =>\n        auth2.signIn().then(() => signedIn(auth2.currentUser.get()));\n      if (auth2.isSignedIn.get()) signedIn(auth2.currentUser.get());\n      else sharedData.logged = false\n    });\n});\n\nlet signedIn = googleUser => {\n  userauth.authResponse = googleUser.getAuthResponse();\n  userauth.profile = googleUser.getBasicProfile();\n\n  axios\n    .post(apiurl.login, { idtoken: userauth.authResponse.id_token })\n    .then(({data}) => {\n      if (data) {\n        console.log(\"AUTH\", data)\n        parseData(data)\n        sharedData.logged = true\n      } else {\n        axios.post(apiurl.data);\n      }\n    })\n    .catch(e => {\n      console.log(\"login failed\", e);\n    });\n};\n\nsharedData.signFuncs.signOut = () => {\n  userauth.authInstance = gapi.auth2.getAuthInstance();\n  userauth.authInstance.signOut().then(() => {\n    window.location.href = \"/logout\";\n  });\n};\n"},"lineCount":null}},"error":null,"hash":"f3092470251b65f7e5b2fa654998ca46","cacheData":{"env":{}}}